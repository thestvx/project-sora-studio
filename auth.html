<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SORA STUDIO — Login</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@900&family=Noto+Sans+Arabic:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --brand: #161B91; }
        body { font-family: 'Inter', 'Noto Sans Arabic', sans-serif; background: #f8fafc; }
        .auth-card { animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        input { transition: all 0.3s ease; border: 1px solid #f1f5f9; }
        input:focus { border-color: var(--brand); box-shadow: 0 0 0 4px rgba(22, 27, 145, 0.05); outline: none; }
        .btn-google { border: 1px solid #e2e8f0; transition: all 0.3s ease; background: white; }
        .btn-google:hover { background: #f9fafb; transform: translateY(-2px); }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

    <div class="auth-card max-w-md w-full bg-white rounded-[3.5rem] shadow-2xl p-10 md:p-14 text-center">
        <div class="mb-10">
            <h1 class="text-3xl font-black text-[#161B91] tracking-tighter uppercase">SORA STUDIO</h1>
            <p id="auth-title" class="text-gray-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-2">لوحة تحكم المدير</p>
        </div>

        <button onclick="loginWithGoogle()" class="btn-google w-full py-4 rounded-2xl flex items-center justify-center gap-3 mb-8 font-bold text-gray-600">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5">
            <span>الدخول بواسطة Google</span>
        </button>

        <div class="relative mb-8">
            <hr class="border-gray-100">
            <span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white px-4 text-[10px] text-gray-300 font-bold uppercase">أو عبر البريد</span>
        </div>

        <div id="login-section" class="space-y-4">
            <input type="email" id="email" placeholder="البريد الإلكتروني" class="w-full p-5 bg-gray-50 rounded-2xl font-bold text-[#161B91]">
            <input type="password" id="pass" placeholder="كلمة المرور" class="w-full p-5 bg-gray-50 rounded-2xl font-bold">
            <button onclick="handleAuth('login')" class="w-full bg-[#161B91] text-white py-5 rounded-[2rem] font-black text-[11px] uppercase tracking-widest hover:shadow-xl transition-all">تسجيل الدخول</button>
            <p class="text-[10px] text-gray-400 font-bold">ليس لديك حساب؟ <span onclick="toggleMode()" class="text-[#161B91] cursor-pointer underline">أنشئ حساباً</span></p>
        </div>

        <div id="signup-section" class="space-y-4 hidden">
            <input type="email" id="s-email" placeholder="بريد جديد" class="w-full p-5 bg-gray-50 rounded-2xl font-bold text-[#161B91]">
            <input type="password" id="s-pass" placeholder="كلمة مرور قوية" class="w-full p-5 bg-gray-50 rounded-2xl font-bold">
            <button onclick="handleAuth('signup')" class="w-full bg-black text-white py-5 rounded-[2rem] font-black text-[11px] uppercase tracking-widest transition-all">إنشاء الحساب</button>
            <p class="text-[10px] text-gray-400 font-bold">لديك حساب؟ <span onclick="toggleMode()" class="text-[#161B91] cursor-pointer underline">دخول</span></p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBhaFmPrWIOFYXyJysEftqi_EQfwmPQveI",
            authDomain: "sora-studio-c1022.firebaseapp.com",
            projectId: "sora-studio-c1022",
            storageBucket: "sora-studio-c1022.firebasestorage.app",
            messagingSenderId: "131507794314",
            appId: "1:131507794314:web:061eb09cb52a05a6e21873"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        // 1. الدخول بجوجل
        window.loginWithGoogle = async () => {
            try {
                await signInWithPopup(auth, provider);
                window.location.href = "admin.html";
            } catch (err) { alert("خطأ في دخول جوجل: " + err.message); }
        };

        // 2. الدخول والإنشاء بالبريد
        window.handleAuth = async (mode) => {
            const email = mode === 'login' ? document.getElementById('email').value : document.getElementById('s-email').value;
            const pass = mode === 'login' ? document.getElementById('pass').value : document.getElementById('s-pass').value;

            try {
                if(mode === 'login') await signInWithEmailAndPassword(auth, email, pass);
                else await createUserWithEmailAndPassword(auth, email, pass);
                window.location.href = "admin.html";
            } catch (err) { alert("فشل: " + err.message); }
        };

        // 3. التبديل بين الواجهات
        window.toggleMode = () => {
            document.getElementById('login-section').classList.toggle('hidden');
            document.getElementById('signup-section').classList.toggle('hidden');
        };
    </script>
</body>
</html>
